var FRANKLIN={};FRANKLIN.Barometer=function(a){var b=a(".barometer"),c=function(b){var c=a(window).scrollTop(),d=c+a(window).height(),e=b.offset().top,f=e+b.height();return f>=c&&d>=e&&d>=f&&e>=c},d=function(a,b,c,d,e){var f,g=360/d*c,h=(90-g)*Math.PI/180,i=a+e*Math.cos(h),j=b-e*Math.sin(h);return f=d==c?[["M",a,b-e],["A",e,e,0,1,1,a-.01,b-e]]:[["M",a,b-e],["A",e,e,0,+(g>180),1,i,j]],{path:f}};return drawBarometer=function(a,b,c,d,e){var f;e>0&&(f=b.path().attr({stroke:a.data("progress-stroke"),"stroke-width":a.data("strokewidth")+1,arc:[c/2,d/2,0,100,c/2-8]}),f.animate({arc:[c/2,d/2,e,100,c/2-8]},1500,"easeInOut",function(){a.find("span").animate({opacity:1},300,"linear")}))},initBarometer=function(b){var e,f=b.data("width"),g=b.data("height"),h=Raphael(b[0],f,g),i=!1,j=b.data("progress")>100?100:b.data("progress");h.customAttributes.arc=d,e=h.path().attr({stroke:b.data("stroke"),"stroke-width":b.data("strokewidth"),arc:[f/2,g/2,0,100,f/2-8]}),b.parent().addClass("barometer-added"),e.animate({arc:[f/2,g/2,100,100,f/2-8]},1e3,function(){0===j&&b.find("span").animate({opacity:1},500,"linear")}),c(b)?(drawBarometer(b,h,f,g,j),i=!0):a(window).scroll(function(){i===!1&&c(b)&&(drawBarometer(b,h,f,g,j),i=!0)})},{init:function(){b.each(function(){initBarometer(a(this))})},getBarometers:function(){return b}}}(jQuery),FRANKLIN.Countdown=function(a){var b=function(){var b=a(".countdown");return b.length&&b.countdown({until:a.countdown.UTCDate(FRANKLIN_CROWDFUNDING.timezone_offset,new Date(b.data().enddate)),format:"dHMS",labels:[FRANKLIN_CROWDFUNDING.years,FRANKLIN_CROWDFUNDING.months,FRANKLIN_CROWDFUNDING.weeks,FRANKLIN_CROWDFUNDING.days,FRANKLIN_CROWDFUNDING.hours,FRANKLIN_CROWDFUNDING.minutes,FRANKLIN_CROWDFUNDING.seconds],labels1:[FRANKLIN_CROWDFUNDING.year,FRANKLIN_CROWDFUNDING.month,FRANKLIN_CROWDFUNDING.week,FRANKLIN_CROWDFUNDING.day,FRANKLIN_CROWDFUNDING.hour,FRANKLIN_CROWDFUNDING.minute,FRANKLIN_CROWDFUNDING.second]}),b};return{init:function(){b()}}}(jQuery),FRANKLIN.Grid=function(a){var b=a(".masonry-grid"),c=function(a){a.masonry()};return{init:function(){a(window).width()>400&&b.each(function(){c(a(this))})},getGrids:function(){return b},resizeGrid:function(){b.each(function(){c(a(this))})}}}(jQuery),FRANKLIN.Pledging=function(a){var b,c=a(".edd_download_purchase_form"),d=a("input[name=atcf_custom_price]"),e=a(".edd_download_purchase_form .pledge-level").sort(function(b,c){return parseInt(a(b).data("price"))-parseInt(a(c).data("price"))}),f=a(".pledge-button a"),g=e.first(),h=function(){var c=parseInt(d.val());if(0!==g.length&&0!==e.length){if(parseInt(g.data("price"))>c)return alert(FRANKLIN.need_minimum_pledge),g.find("input").prop("checked",!0),void g.change();e.each(function(){return a(this).data("price")<=c&&a(this).hasClass("not-available")===!1?void(b=a(this)):!1}),b.find("input").prop("checked",!0)}};return{init:function(){f.on("click",function(){var b=a(this).data("price");console.log(a(this)),c.find('[data-price="'+b+'"] input').prop("checked",!0).trigger("change")}),c.on("change",".pledge-level",function(){d.val(a(this).data().price)}).on("change","input[name=atcf_custom_price]",function(){h()})}}}(jQuery),FRANKLIN.CrossBrowserPlaceholders=function(a){return{init:function(){var b=a(":text,textarea");if(b.length&&!("placeholder"in b.first()[0])){var c=document.activeElement;b.focus(function(){null!=a(this).attr("placeholder")&&(a(this).val(""),a(this).val()!==a(this).attr("placeholder")&&a(this).removeClass("hasPlaceholder"))}).blur(function(){null==a(this).attr("placeholder")||""!==a(this).val()&&a(this).val()!==a(this).attr("placeholder")||a(this).val(a(this).attr("placeholder")).addClass("hasPlaceholder")}),b.blur(),a(c).focus(),a("form").submit(function(){a(this).find(".hasPlaceholder").each(function(){a(this).val("")})})}}}}(jQuery),FRANKLIN.DropdownMenus=function(a){return{init:function(){a(".menu li").on("mouseover",function(){a(this).addClass("hovering")}).on("mouseout",function(){a(this).removeClass("hovering")})}}}(jQuery),FRANKLIN.FancySelect=function(a){return{init:function(){var b=a("select"),c=function(a){a.parent().css("display",a.css("display"))};return b.parent().hasClass("select-wrapper")?c:(b.wrap('<div class="select-wrapper" />').on("change",function(){c(a(this))}),b.each(function(){c(a(this))}),c)}}}(jQuery),FRANKLIN.ImageHovers=function(a){return{init:function(){a(".on-hover").each(function(){var b=a(this).parent(),c=b.find("img");a(this).css({width:c.width(),left:c.position().left}),b.addClass("hover-parent").on("mouseover",function(){a(this).addClass("hovering")}).on("mouseout",function(){a(this).removeClass("hovering")})})}}}(jQuery),FRANKLIN.LeanModal=function(a){return{init:function(){a("[data-trigger-modal]").leanModal({closeButton:".close-modal"})}}}(jQuery),FRANKLIN.ResponsiveMenu=function(a){return{init:function(){var b,c,d;if(b=a(".site-navigation"),b&&(c=b.find(".menu-toggle"))){if(d=b.find("ul"),!d)return void c.hide();d.attr("aria-expanded","false"),d.hasClass("nav-menu")||d.addClass("nav-menu"),c.on("click",function(){b.hasClass("toggled")?(b.removeClass("toggled"),c.attr("aria-expanded","false"),d.attr("aria-expanded","false")):(b.addClass("toggled"),c.attr("aria-expanded","true"),d.attr("aria-expanded","true"))})}}}}(jQuery),FRANKLIN.SkipLinkFocusFix=function(){var a=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,b=navigator.userAgent.toLowerCase().indexOf("opera")>-1,c=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(a||b||c)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var a=document.getElementById(location.hash.substring(1));a&&(/^(?:a|select|input|button|textarea)$/i.test(a.tagName)||(a.tabIndex=-1),a.focus())},!1)}();